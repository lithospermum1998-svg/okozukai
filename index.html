<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>MONEY LOG PRO</title>

<style>
:root{
  --ios-blue:#007aff;
  --ios-green:#34c759;
  --ios-red:#ff3b30;
  --bg:#f2f2f7;
  --card:#fff;
  --text-main:#1c1c1e;
  --text-sub:#8e8e93;
  --radius:12px;
}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:var(--bg);
  color:var(--text-main);
}

.island-header{
  padding:16px;
  background:var(--card);
  border-bottom:1px solid #e5e5ea;
}

.island-header h1{
  margin:0 0 8px;
  font-size:20px;
}

.header-tabs{
  display:flex;
  gap:8px;
}

.header-tabs button{
  flex:1;
  padding:8px;
  border:none;
  border-radius:8px;
  background:#e5e5ea;
  font-size:14px;
}

.header-tabs button.active{
  background:var(--ios-blue);
  color:#fff;
}

.page{
  display:none;
  padding:16px;
}

.page.active{
  display:block;
}

.island-main{
  background:var(--card);
  border-radius:var(--radius);
  padding:16px;
  margin-bottom:16px;
}

.island-title{
  font-size:14px;
  color:var(--text-sub);
  margin-bottom:6px;
}

.valuation{
  font-size:26px;
  font-weight:600;
  margin-bottom:12px;
}

.card{
  border-bottom:1px solid #e5e5ea;
  padding:10px 0;
}

.card:last-child{
  border-bottom:none;
}

.row{
  display:flex;
  justify-content:space-between;
  font-size:14px;
}

.sub{
  font-size:12px;
  color:var(--text-sub);
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="island-header">
  <h1>MONEY LOG</h1>
  <div class="header-tabs">
    <button id="tab-log" class="active" onclick="switchPage('logPage')">家計</button>
    <button id="tab-stock" onclick="switchPage('stockPage')">NISA</button>
  </div>
</div>

<!-- 家計 PAGE -->
<div id="logPage" class="page active">
  <div class="island-main">
    <div class="island-title">TODAY</div>
    <div id="dateLabel" class="sub"></div>
  </div>

  <div class="island-main">
    <div class="island-title">LOG</div>
    <div id="logList"></div>
  </div>
</div>

<!-- NISA PAGE -->
<div id="stockPage" class="page">
  <div class="island-main">
    <div class="island-title">MY ASSETS</div>
    <div class="valuation">¥<span id="totalStockValuation">0</span></div>
    <div id="stockList"></div>
  </div>
</div>

<script>
/* ========= STATE ========= */
const state = {
  logs: [
    { title:'ランチ', amount:-900 },
    { title:'コーヒー', amount:-450 },
    { title:'給料', amount:250000 }
  ],
  stocks: [
    { name:'NASDAQ100', price:18000, holding:100 },
    { name:'S&P500', price:23000, holding:50 },
    { name:'GOLD', price:9000, holding:30 }
  ]
};

/* ========= DATE ========= */
const selDate = new Date();

function formatDateLabel(d){
  return `${d.getFullYear()}.${d.getMonth()+1}.${d.getDate()}`;
}

/* ========= RENDER LOG ========= */
function renderLogs(){
  document.getElementById('dateLabel').textContent = formatDateLabel(selDate);
  const wrap = document.getElementById('logList');
  wrap.innerHTML = '';

  state.logs.forEach(l=>{
    const div = document.createElement('div');
    div.className = 'card';
    div.innerHTML = `
      <div class="row">
        <span>${l.title}</span>
        <span>${l.amount.toLocaleString()}</span>
      </div>
    `;
    wrap.appendChild(div);
  });
}

/* ========= RENDER STOCK ========= */
function renderStocks(){
  const wrap = document.getElementById('stockList');
  wrap.innerHTML = '';

  const total = state.stocks.reduce((sum,s)=>{
    return sum + Math.floor((s.price * s.holding) / 10000);
  },0);

  document.getElementById('totalStockValuation').textContent =
    total.toLocaleString();

  state.stocks.forEach(s=>{
    const val = Math.floor((s.price * s.holding) / 10000);
    const div = document.createElement('div');
    div.className = 'card';
    div.innerHTML = `
      <div class="row">
        <span>${s.name}</span>
        <span>¥${val.toLocaleString()}</span>
      </div>
      <div class="sub">${s.holding}口</div>
    `;
    wrap.appendChild(div);
  });
}

/* ========= PAGE SWITCH ========= */
function switchPage(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');

  document.getElementById('tab-log').classList.toggle('active', id==='logPage');
  document.getElementById('tab-stock').classList.toggle('active', id==='stockPage');

  if(id === 'stockPage') renderStocks();
}

/* ========= INIT ========= */
renderLogs();
</script>

</body>
</html>
